---
title: 移动端横竖屏解决
date: 2020-03-25 18:59:04
tags: 移动端
---

## 移动端横竖屏解决
- 监听横竖屏变化
```javascript
function bindOrientationChange(onChange) {
  const resizeEvt = 'onorientationchange' in window ? 'orientationchange' : 'resize';
  if (!document.addEventListener) {
    return false;
  }
  window.addEventListener(resizeEvt, onChange, false);
}
```
<!--more-->
- 判断横竖屏
``` javascript
function detectOrientation() {
  //键盘调起以后可能影响判断
  const { clientHeight, clientWidth } = document.documentElement;
  return clientHeight >= clientWidth ? 'portrait' : 'landscape';

  //华为有的手机不支持api
  const mql = window.matchMedia('(orientation: portrait)');
  return mql.matches ? 'portrait' : 'landscape';

  //现有的解决  没有发现问题
  const orientation = window.orientation;
  return (orientation === 90 || orientation === -90) ? 'landscape' : 'portrait';
}
```